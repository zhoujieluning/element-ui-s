!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.mui=e():t.mui=e()}(self,(function(){return function(){var __webpack_modules__={7484:function(t){t.exports=function(){"use strict";var t=6e4,e=36e5,i="millisecond",n="second",r="minute",a="hour",o="day",s="week",l="month",c="quarter",u="year",d="date",_="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,i){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(i)+t},b={s:m,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),n=Math.floor(i/60),r=i%60;return(e<=0?"+":"-")+m(n,2,"0")+":"+m(r,2,"0")},m:function t(e,i){if(e.date()<i.date())return-t(i,e);var n=12*(i.year()-e.year())+(i.month()-e.month()),r=e.clone().add(n,l),a=i-r<0,o=e.clone().add(n+(a?-1:1),l);return+(-(n+(i-r)/(a?r-o:o-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:u,w:s,d:o,D:d,h:a,m:r,s:n,ms:i,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",v={};v[g]=h;var y=function(t){return t instanceof E},w=function(t,e,i){var n;if(!t)return g;if("string"==typeof t)v[t]&&(n=t),e&&(v[t]=e,n=t);else{var r=t.name;v[r]=t,n=r}return!i&&n&&(g=n),n||!i&&g},$=function(t,e){if(y(t))return t.clone();var i="object"==typeof e?e:{};return i.date=t,i.args=arguments,new E(i)},M=b;M.l=w,M.i=y,M.w=function(t,e){return $(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var E=function(){function h(t){this.$L=w(t.locale,null,!0),this.parse(t)}var m=h.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(M.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(f);if(n){var r=n[2]-1||0,a=(n[7]||"0").substring(0,3);return i?new Date(Date.UTC(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return M},m.isValid=function(){return!(this.$d.toString()===_)},m.isSame=function(t,e){var i=$(t);return this.startOf(e)<=i&&i<=this.endOf(e)},m.isAfter=function(t,e){return $(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<$(t)},m.$g=function(t,e,i){return M.u(t)?this[e]:this.set(i,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var i=this,c=!!M.u(e)||e,_=M.p(t),f=function(t,e){var n=M.w(i.$u?Date.UTC(i.$y,e,t):new Date(i.$y,e,t),i);return c?n:n.endOf(o)},p=function(t,e){return M.w(i.toDate()[t].apply(i.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),i)},h=this.$W,m=this.$M,b=this.$D,g="set"+(this.$u?"UTC":"");switch(_){case u:return c?f(1,0):f(31,11);case l:return c?f(1,m):f(0,m+1);case s:var v=this.$locale().weekStart||0,y=(h<v?h+7:h)-v;return f(c?b-y:b+(6-y),m);case o:case d:return p(g+"Hours",0);case a:return p(g+"Minutes",1);case r:return p(g+"Seconds",2);case n:return p(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var s,c=M.p(t),_="set"+(this.$u?"UTC":""),f=(s={},s[o]=_+"Date",s[d]=_+"Date",s[l]=_+"Month",s[u]=_+"FullYear",s[a]=_+"Hours",s[r]=_+"Minutes",s[n]=_+"Seconds",s[i]=_+"Milliseconds",s)[c],p=c===o?this.$D+(e-this.$W):e;if(c===l||c===u){var h=this.clone().set(d,1);h.$d[f](p),h.init(),this.$d=h.set(d,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[M.p(t)]()},m.add=function(i,c){var d,_=this;i=Number(i);var f=M.p(c),p=function(t){var e=$(_);return M.w(e.date(e.date()+Math.round(t*i)),_)};if(f===l)return this.set(l,this.$M+i);if(f===u)return this.set(u,this.$y+i);if(f===o)return p(1);if(f===s)return p(7);var h=(d={},d[r]=t,d[a]=e,d[n]=1e3,d)[f]||1,m=this.$d.getTime()+i*h;return M.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,i=this.$locale();if(!this.isValid())return i.invalidDate||_;var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=M.z(this),a=this.$H,o=this.$m,s=this.$M,l=i.weekdays,c=i.months,u=function(t,i,r,a){return t&&(t[i]||t(e,n))||r[i].substr(0,a)},d=function(t){return M.s(a%12||12,t,"0")},f=i.meridiem||function(t,e,i){var n=t<12?"AM":"PM";return i?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:M.s(s+1,2,"0"),MMM:u(i.monthsShort,s,c,3),MMMM:u(c,s),D:this.$D,DD:M.s(this.$D,2,"0"),d:String(this.$W),dd:u(i.weekdaysMin,this.$W,l,2),ddd:u(i.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(a),HH:M.s(a,2,"0"),h:d(1),hh:d(2),a:f(a,o,!0),A:f(a,o,!1),m:String(o),mm:M.s(o,2,"0"),s:String(this.$s),ss:M.s(this.$s,2,"0"),SSS:M.s(this.$ms,3,"0"),Z:r};return n.replace(p,(function(t,e){return e||h[t]||r.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(i,d,_){var f,p=M.p(d),h=$(i),m=(h.utcOffset()-this.utcOffset())*t,b=this-h,g=M.m(this,h);return g=(f={},f[u]=g/12,f[l]=g,f[c]=g/3,f[s]=(b-m)/6048e5,f[o]=(b-m)/864e5,f[a]=b/e,f[r]=b/t,f[n]=b/1e3,f)[p]||b,_?g:M.a(g)},m.daysInMonth=function(){return this.endOf(l).$D},m.$locale=function(){return v[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),n=w(t,e,!0);return n&&(i.$L=n),i},m.clone=function(){return M.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},h}(),D=E.prototype;return $.prototype=D,[["$ms",i],["$s",n],["$m",r],["$H",a],["$W",o],["$M",l],["$y",u],["$D",d]].forEach((function(t){D[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),$.extend=function(t,e){return t.$i||(t(e,E,$),t.$i=!0),$},$.locale=w,$.isDayjs=y,$.unix=function(t){return $(1e3*t)},$.en=v[g],$.Ls=v,$.p={},$}()},1900:function(t,e,i){"use strict";function n(t,e,i,n,r,a,o,s){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}i.d(e,{Z:function(){return n}})},5407:function(t,e,i){"use strict";i.d(e,{Z:function(){return o}});const n=(t,e,i)=>e?t+i+e:t,r=(t,e)=>{if("string"==typeof e)return n(t,e,"--");if(Array.isArray(e))return e.map((e=>r(t,e)));const i={};return Object.keys(e||{}).forEach((n=>{i[t+"--"+n]=e[n]})),i};var a={methods:{b(t,e){const{name:i}=this.$options;return t&&"string"!=typeof t&&(e=t,t=""),t=n(i,t,"__"),e?[t,r(t,e)]:t}}};function o(t){return t.mixins=t.mixins||[],t.mixins.push(a),t}["img","array","url"].concat(["upload","dynamic","map","checkbox","cascader","dynamic","timerange","monthrange","daterange","datetimerange","dates"]),["dates","date","datetime","datetimerange","daterange","time","timerange","week","month","monthrange","year"].concat(["select","checkbox","radio","cascader","tree","color","icon","table","map"])},620:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{I8:function(){return deepClone},kl:function(){return setPx}});var _validate__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1676),_variable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7787);function getFixed(t=0,e=2){return Number(t.toFixed(e))}function getAsVal(t,e=""){let i=deepClone(t);return(0,_validate__WEBPACK_IMPORTED_MODULE_0__.H)(e)||e.split(".").forEach((t=>{i=(0,_validate__WEBPACK_IMPORTED_MODULE_0__.H)(i[t])?"":i[t]})),i}function setAsVal(obj,bind="",value=""){return eval("obj."+bind+"=`"+value+"`"),obj}const loadScript=(t="js",e)=>{let i=!1;return new Promise((n=>{const r=document.getElementsByTagName("head")[0];if(r.children.forEach((t=>{-1!==(t.src||"").indexOf(e)&&(i=!0,n())})),i)return;let a;"js"===t?(a=document.createElement("script"),a.type="text/javascript",a.src=e):"css"===t&&(a=document.createElement("link"),a.rel="stylesheet",a.type="text/css",a.href=e),r.appendChild(a),a.onload=function(){n()}}))};function downFile(t,e){"object"==typeof t&&t instanceof Blob&&(t=URL.createObjectURL(t));var i,n=document.createElement("a");n.href=t,n.download=e||"",window.MouseEvent?i=new MouseEvent("click"):(i=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}function strCorNum(t){return t.forEach(((e,i)=>{t[i]=Number(e)})),t}function extend(){var t,e,i,n,r=arguments[0]||{},a=!1,o=Array.prototype.slice.call(arguments),s=1,l=!1;for("boolean"==typeof r&&(a=r,s++,r=arguments[1]);s<o.length;s++)if(null!=(t=o[s]))for(i in t)n=t[i],e=r[i],a&&("[object Object]"===toString.call(n)||(l="[object Array]"==toString.call(n)))?(e=l?"[object Array]"===toString.call(e)?e:[]:"[object Object]"===toString.call(e)?e:{},r[i]=extend(a,e,n)):void 0!==n&&n!==e&&(r[i]=n);return r}function createObj(t,e){let i=e.split("."),n=i.splice(0,1)[0],r={};if(r[n]={},i.length>=2){let t="{",e="}",a="";i.forEach((e=>{a=`${a}${t}"${e}":`})),a=`${a}""`;for(let t=0;t<i.length;t++)a=`${a}${e}`;a=JSON.parse(a),r[n]=a}return extend(!0,t,r)}function dataURLtoFile(t,e){let i=t.split(","),n=i[0].match(/:(.*?);/)[1],r=atob(i[1]),a=r.length,o=new Uint8Array(a);for(;a--;)o[a]=r.charCodeAt(a);return new File([o],e,{type:n})}function findObject(t,e,i="prop"){let n=-1,r=(()=>{let e;return t.forEach((t=>{t.column?e="group":t.children&&(e="tree")})),e})();return"group"===r?t.forEach((t=>{const r=findArray(t.column,e,i,!0);-1!==r&&(n=r)})):n="tree"===r?findLabelNode(t,e,{value:i},!0):findArray(t,e,i,!0),n}function randomId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",e=t.length,i="";for(let n=0;n<16;n++)i+=t.charAt(Math.floor(Math.random()*e));return i}const getObjType=t=>{var e=Object.prototype.toString;return t instanceof Element?"element":{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[e.call(t)]},isJson=t=>Array.isArray(t)?t[0]instanceof Object:t instanceof Object,deepClone=t=>{var e,i=getObjType(t);if("array"===i)e=[];else{if("object"!==i)return t;e={}}if("array"===i)for(var n=0,r=t.length;n<r;n++)t[n]=(t[n],t[n]),t[n]&&delete t[n].$parent,e.push(deepClone(t[n]));else if("object"===i)for(var a in t)t&&delete t.$parent,e[a]=deepClone(t[a]);return e},sortArrys=(t,e)=>(t.sort((function(t,i){return t[e]>i[e]?-1:t[e]<i[e]?1:0})),t),setPx=(t,e="")=>((0,_validate__WEBPACK_IMPORTED_MODULE_0__.H)(t)&&(t=e),(0,_validate__WEBPACK_IMPORTED_MODULE_0__.H)(t)?"":(-1===(t+="").indexOf("%")&&(t+="px"),t)),detailDataType=(t,e)=>(0,_validate__WEBPACK_IMPORTED_MODULE_0__.H)(t)?t:"number"===e?Number(t):"string"===e?t+"":t,getUrlParams=t=>{let e={url:"",params:{}},i=t.split("?");e.url=i[0];let n=i[1];return n&&n.split("&").forEach((t=>{let i=t.split("="),n=i[0],r=i[1];e.params[n]=r})),e},detailDic=(t=[],e={},i)=>{let n=e.value||_variable__WEBPACK_IMPORTED_MODULE_1__.pC.value,r=e.children||_variable__WEBPACK_IMPORTED_MODULE_1__.pC.children;return t.forEach((t=>{t[n]=detailDataType(t[n],i),t[r]&&detailDic(t[r],e,i)})),t},findByValue=(t,e,i)=>{if((0,_validate__WEBPACK_IMPORTED_MODULE_0__.H)(t))return e;let n="",r=e instanceof Array,a=r?e:[e];i=i||_variable__WEBPACK_IMPORTED_MODULE_1__.pC,n=[];for(let e=0;e<a.length;e++)n.push(findLabelNode(t,a[e],i)||a[e]);return r?n.join(_variable__WEBPACK_IMPORTED_MODULE_1__.A5).toString():n.join()},filterDefaultParams=(t,e=!0)=>{let i=deepClone(t);if(e)return i;for(let t in i)(-1!==t.indexOf("$")||(0,_validate__WEBPACK_IMPORTED_MODULE_0__.H)(i[t]))&&delete i[t];return i},detailDicGroup=(t=[],e={})=>{let i=deepClone(t),n=e[_variable__WEBPACK_IMPORTED_MODULE_1__.pC.groups]||_variable__WEBPACK_IMPORTED_MODULE_1__.pC.groups;return t.forEach((t=>{t[n]&&(i=i.concat(t[n]))})),i},findLabelNode=(t,e,i,n)=>{let r;n||(t=detailDicGroup(t,i));let a=t=>{const o=i.label||_variable__WEBPACK_IMPORTED_MODULE_1__.pC.label,s=i.value||_variable__WEBPACK_IMPORTED_MODULE_1__.pC.value,l=i.children||_variable__WEBPACK_IMPORTED_MODULE_1__.pC.children;for(let i=0;i<t.length;i++){const c=t[i],u=c[l]||[];c[s]===e?r=n?c:c[o]:a(u)}};return a(t),r},getDeepData=t=>(Array.isArray(t)?t:t.data)||[],getObjValue=(t,e="",i)=>{const n=e.split(".");let r=t;return""===n[0]&&"object"!==i?getDeepData(t):(""!==n[0]&&n.forEach((t=>{r=r[t]})),r)},findArray=(t,e,i,n)=>{i=i||_variable__WEBPACK_IMPORTED_MODULE_1__.pC.value;for(let r=0;r<t.length;r++)if(t[r][i]===e)return n?t[r]:r;return-1},getPasswordChar=(t="",e)=>{let i=t.toString().length;t="";for(let n=0;n<i;n++)t+=e;return t},arraySort=(t=[],e,i)=>t.filter((t=>!(0,_validate__WEBPACK_IMPORTED_MODULE_0__.H)(t[e]))).sort(((t,e)=>i(t,e))).concat(t.filter((t=>(0,_validate__WEBPACK_IMPORTED_MODULE_0__.H)(t[e])))),clearVal=(t,e=[])=>t?(Object.keys(t).forEach((i=>{if(!e.includes(i))if(i.includes("$"))delete t[i];else if(!(0,_validate__WEBPACK_IMPORTED_MODULE_0__.H)(t[i])){let e=getObjType(t[i]);"array"===e?t[i]=[]:"object"===e?t[i]={}:["number","boolean"].includes(e)?t[i]=void 0:t[i]=""}})),t):{},vaildData=(t,e)=>"boolean"==typeof t?t:(0,_validate__WEBPACK_IMPORTED_MODULE_0__.H)(t)?e:t,debounce=(t,e,i)=>{let n=null;return function(){if(clearTimeout(n),i&&null==n)return t.apply(this,arguments),void(n=0);n=setTimeout((()=>{t.apply(this),n=null}),e)}}},1676:function(t,e,i){"use strict";i.d(e,{H:function(){return r}});var n=i(620);function r(t){if(t&&0===parseInt(t))return!1;const e=["$parent"];if(t instanceof Date||"boolean"==typeof t||"number"==typeof t)return!1;if(!(t instanceof Array)){if(t instanceof Object){for(var i in t=(0,n.I8)(t),e.forEach((e=>{delete t[e]})),t)return!1;return!0}return"null"===t||null==t||"undefined"===t||void 0===t||""===t}return 0===t.length}},7787:function(t,e,i){"use strict";i.d(e,{pC:function(){return n},A5:function(){return r}});const n={nodeKey:"id",label:"label",value:"value",desc:"desc",groups:"groups",title:"title",leaf:"leaf",children:"children",labelText:"名称",disabled:"disabled"},r=(["img","array","url"].concat(["upload","dynamic","map","checkbox","cascader","dynamic","timerange","monthrange","daterange","datetimerange","dates"]),["dates","date","datetime","datetimerange","daterange","time","timerange","week","month","monthrange","year"].concat(["select","checkbox","radio","cascader","tree","color","icon","table","map"])," | ")}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(t,e){for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};return function(){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return c}});var t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b(),style:t.heightStyleName,on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSend.apply(null,arguments)}}},[i("audio",{ref:"chatAudio"},[i("source",{attrs:{src:t.audio[0],type:"audio/ogg"}}),t._v(" "),i("source",{attrs:{src:t.audio[1],type:"audio/mpeg"}}),t._v(" "),i("source",{attrs:{src:t.audio[2],type:"audio/wav"}})]),t._v(" "),i("div",{staticClass:"web__logo"},[i("img",{staticClass:"web__logo-img",attrs:{src:t.config.img,alt:""}}),t._v(" "),i("div",{staticClass:"web__logo-info"},[i("p",{staticClass:"web__logo-name"},[t._v(t._s(t.config.name))]),t._v(" "),i("p",{staticClass:"web__logo-dept"},[t._v(t._s(t.config.dept))])]),t._v(" "),t._t("header")],2),t._v(" "),i("div",{staticClass:"web__content"},[i("div",{style:t.widthStyleName},[i("div",{ref:"main",staticClass:"web__main"},t._l(t.list,(function(e,n){return i("div",{key:n,staticClass:"web__main-item",class:{"web__main-item--mine":e.mine}},[i("div",{staticClass:"web__main-user"},[i("img",{attrs:{src:e.img}}),t._v(" "),i("cite",[t._v("\n              "+t._s(e.name)+"\n              "),i("i",[t._v(t._s(e.date))])])]),t._v(" "),i("div",{staticClass:"web__main-text"},[i("div",{staticClass:"web__main-arrow"}),t._v(" "),i("span",{ref:"content",refInFor:!0,domProps:{innerHTML:t._s(t.handleDetail(e.text.text))}}),t._v(" "),t.validatenull(e.text.list)?t._e():i("ul",{staticClass:"web__main-list"},t._l(e.text.list,(function(e,n){return i("li",{key:n,on:{click:function(i){return t.handleItemMsg(e)}}},[t._v("\n                "+t._s(e.text)+"\n              ")])})),0)])])})),0),t._v(" "),i("div",{staticClass:"web__footer",style:t.widthStyleName},[i("div",{staticClass:"web__tools"},[t.tools.img?i("i",{staticClass:"el-icon-picture-outline",on:{click:function(e){return t.handleUpload("img")}}}):t._e(),t._v(" "),t.tools.video?i("i",{staticClass:"el-icon-video-camera",on:{click:function(e){return t.handleUpload("video")}}}):t._e(),t._v(" "),t.tools.file?i("i",{staticClass:"el-icon-folder-opened",on:{click:function(e){return t.handleUpload("file")}}}):t._e()]),t._v(" "),i("div",{staticClass:"web__msg"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],staticClass:"web__msg-input",attrs:{rows:"2",placeholder:t.placeholder},domProps:{value:t.msg},on:{input:function(e){e.target.composing||(t.msg=e.target.value)}}}),t._v(" "),i("div",{staticClass:"web__msg-menu"},[i("el-dropdown",{staticClass:"web__msg-submit",attrs:{"split-button":"",type:"primary",size:"mini",trigger:"click"},on:{click:t.handleSend}},[t._v("\n              发送\n              "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",rows:3,"show-word-limit":"",maxlength:"100",placeholder:"请输入快捷回复语",type:"textarea"},model:{value:t.keys,callback:function(e){t.keys=e},expression:"keys"}}),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addKey}},[t._v("确定")])],1),t._v(" "),i("el-button",{attrs:{slot:"reference",type:"text",icon:"el-icon-plus"},slot:"reference"})],1)],1),t._v(" "),i("el-scrollbar",{staticStyle:{height:"100px"}},t._l(t.keylist,(function(e,n){return i("el-dropdown-item",{key:n,nativeOn:{click:function(i){return t.sendKey(e)}}},[i("el-tooltip",{attrs:{effect:"dark",content:e,placement:"top"}},[i("span",[t._v("\n                        "+t._s(e.substr(0,10))+t._s(e.length>10?"...":""))])])],1)})),1)],1)],1)],1)])])]),t._v(" "),t._t("default")],2),t._v(" "),i("el-dialog",{attrs:{title:t.upload.title,"append-to-body":"",visible:t.upload.box,width:"30%"},on:{"update:visible":function(e){return t.$set(t.upload,"box",e)}}},[i("el-form",{ref:"form",attrs:{model:t.upload}},[i("el-form-item",{attrs:{prop:"src",rules:[{required:!0,message:"地址不能为空"}]}},[i("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",rows:4,"show-word-limit":"",maxlength:"100",placeholder:"请输入地址",type:"textarea"},model:{value:t.upload.src,callback:function(e){t.$set(t.upload,"src",e)},expression:"upload.src"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.upload.box=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.uploadSubmit}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{staticClass:"web__dialog",attrs:{visible:t.show,width:"40%","append-to-body":"","before-close":t.handleClose},on:{"update:visible":function(e){t.show=e}}},[t.imgSrc?i("img",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.imgSrc}}):t._e(),t._v(" "),t.videoSrc?i("video",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.videoSrc,controls:"controls"}}):t._e(),t._v(" "),t.audioSrc?i("audio",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.audioSrc,controls:"controls"}}):t._e()])],1)};t._withStripped=!0;var e=__webpack_require__(5407),i=__webpack_require__(7484),n=__webpack_require__.n(i),r=__webpack_require__(620),a=__webpack_require__(1676),o=(0,e.Z)({name:"els-chat",data:()=>({upload:{box:!1,src:"",type:"",title:""},visible:!1,imgSrc:"",videoSrc:"",audioSrc:"",keys:"",show:!1,msg:""}),props:{beforeOpen:Function,tools:{type:Object,default:()=>({img:!0,video:!0,file:!0})},placeholder:{type:String,default:"请输入..."},width:{type:[String,Number],default:320},height:{type:[String,Number],default:520},value:{type:String},notice:{type:Boolean,default:!0},audio:{type:Array,default:()=>["https://www.helloweba.net/demo/notifysound/notify.ogg","https://www.helloweba.net/demo/notifysound/notify.mp3","https://www.helloweba.net/demo/notifysound/notify.wav"]},config:{type:Object,default:()=>({})},keylist:{type:Array,default:()=>[]},list:{type:Array,default:()=>[]}},watch:{"upload.box"(t){t&&this.$nextTick((()=>{this.$refs.form.clearValidate()}))},value:{handler(){this.msg=this.value},immediate:!0},msg:{handler(){this.$emit("input",this.msg)},immediate:!0}},computed:{heightStyleName(){return{height:(0,r.kl)(this.height)}},widthStyleName(){return{width:(0,r.kl)(this.width)}},msgActive(){return!this.validatenull(this.msg.replace(/[\r\n]/g,""))}},methods:{validatenull(t){(0,a.H)(t)},uploadSubmit(){this.$refs.form.validate((t=>{t&&(this.upload.box=!1,this.$emit("submit",this.getDetail(this.upload)))}))},handleUpload(t){this.upload.type=t,this.upload.src="","img"===t?this.upload.title="图片上传":"video"===t?this.upload.title="视频上传":"file"===t&&(this.upload.title="文件上传"),this.upload.box=!0},handleClose(t){this.imgSrc=void 0,this.videoSrc=void 0,this.audioSrc=void 0,t()},addKey(){""!==this.keys&&(this.$emit("keyadd",this.keys),this.keys=""),this.visible=!1},sendKey(t){this.$emit("keysend",t)},getAudio(){this.$refs.chatAudio.play()},getNotification(t){const e=this,i=Notification||window.Notification;if(i){const n=i.permission;function r(){i.requestPermission((function(t){"granted"===t?a():console.log("用户无情残忍的拒绝了你!!!")}))}function a(){const i=new Notification(e.config.name,{body:t,icon:e.config.img});i.onshow=function(){e.getAudio(),setTimeout((()=>{i.close()}),2500)},i.onclick=function(t){i.close()}}"granted"===n?a():"denied"===n?console.log("用户拒绝了你!!!"):r()}},pushMsg(t={}){const e=!0===t.mine,i=t.text||{},r={date:t.date||n()().format("YYYY-MM-DD HH:mm:ss"),text:"object"!=typeof i?{text:i}:i,mine:e,img:e?this.config.myImg:this.config.img,name:e?this.config.myName:this.config.name};this.list.push(r),setTimeout((()=>{this.setScroll()}),50)},setScroll(t){this.$nextTick((()=>{this.$refs.main.scrollTop=t||this.$refs.main.scrollHeight}))},handleSend(){this.msgActive&&this.$emit("submit")},handleItemMsg(t){this.$emit("submit",t.ask)},handleDetail(t=""){let e=t;return setTimeout((()=>{const t=this.$refs.content;Array.isArray(t)&&t.forEach((t=>{for(let e=0;e<t.children.length;e++){const i=t.children[e];0!=i.getAttribute("data-flag")&&(i.setAttribute("data-flag",0),i.onclick=()=>{this.handleEvent(i.dataset)},"IMG"===i.tagName?(i.className="web__msg--img",i.src=i.getAttribute("data-src")):"VIDEO"===i.tagName?(i.className="web__msg--video",i.src=i.getAttribute("data-src")):"AUDIO"===i.tagName?(i.className="web__msg--audio",i.controls="controls",i.src=i.getAttribute("data-src")):"FILE"===i.tagName?(i.className="web__msg--file",i.innerHTML=`<h2>File</h2><span>${i.getAttribute("data-name")}</span>`):"MAP"===i.tagName&&(i.className="web__msg--file web__msg--map",i.innerHTML=`<h2>Map</h2><span>${i.getAttribute("data-longitude")} , ${i.getAttribute("data-latitude")}<br />${i.getAttribute("data-address")}</span>`),this.setScroll())}}))}),0),e},getDetail(t={}){const{type:e,src:i,name:n,longitude:r,latitude:a,address:o}=t;return"img"===e?`<img data-type="IMG" data-src="${i}"  />`:"video"===e?`<video data-type="VIDEO"  data-src="${i}"></video>`:"audio"===e?`<audio data-type="AUDIO"  data-src="${i}"></audio>`:"file"===e?`<file data-type="FILE" data-name="${n}" data-src="${i}"></file>`:"map"===e?`<map data-type="MAP" data-src="${i}" data-address="${o} "data-latitude="${a}" data-longitude="${r}"></map>`:void 0},handleEvent(t){const e=()=>{"IMG"===t.type?(this.imgSrc=t.src,this.show=!0):"VIDEO"===t.type?(this.videoSrc=t.src,this.show=!0):"AUDIO"===t.type?(this.audioSrc=t.src,this.show=!0):"FILE"===t.type&&window.open(t.src)};"function"==typeof this.beforeOpen?this.beforeOpen(t,e):e()},rootSendMsg(t){this.pushMsg({text:t}),this.notice&&this.getNotification(t.text||t)}}}),s=(0,__webpack_require__(1900).Z)(o,t,[],!1,null,null,null);s.options.__file="packages/lib/chat/src/main.vue";var l=s.exports;l.install=function(t){t.component(l.name,l)};var c=l}(),__webpack_exports__}()}));